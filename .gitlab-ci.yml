# define an image with latex installed
image: gitlab.ipb.uni-bonn.de:4567/global/docker-images:ipb_latex

# This file is generated by GitLab CI
before_script:
  - git submodule update --init

# Cyrill likes having a make file. Don't annoy the boss. Make sure the Makefile
# is working as expected. Makefile is in this repo.
make:
  script:
  # just try to build it with pdflatex. This will complaint in case of errors.
  - make
  tags:
  # this project will only be built by a runner that satisfies all of the tags
  # we want a docker build, so require the docker tag
  - docker
  # we use our private registry. Because of the bug in gitlab, we need to have
  # the image downloaded on the server. Therefore we use this tag.
  - latex_private_registry
  artifacts:
    paths:
    - "*.pdf"
    expire_in: 1 week
